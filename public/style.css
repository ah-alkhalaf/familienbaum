:root { --bg:#f5f7f5; --panel:#fff; --edge:#6b4226; }
* { box-sizing:border-box; }
body { margin:0; font-family:Segoe UI, Roboto, sans-serif; background:var(--bg); color:#111; }
header { text-align:center; padding:16px; font-size:26px; font-weight:700; }

#toolbar { display:flex; gap:8px; justify-content:center; padding:4px 12px 8px; }
#toolbar input { min-width:260px; padding:8px; border:1px solid #cfd8cf; border-radius:8px; }
#toolbar button { padding:8px 12px; border:none; border-radius:8px; background:#2e7d32; color:#fff; font-weight:600; cursor:pointer; }

#app {
  display:grid;
  grid-template-columns: 1fr;
  gap:12px;
  padding:12px;
  align-items: start;
}
#app.with-panel {
  grid-template-columns: 360px minmax(0,1fr);
}

#panel {
  background:var(--panel);
  border:1px solid #e4e8e4;
  border-radius:12px;
  padding:12px;
  position: sticky;
  top: 8px;
  align-self: start;
  max-height: calc(100vh - 120px);
  overflow: auto;
  z-index: 2;
}
#panel.hidden { display:none;}

.field { margin:8px 0; display:flex; flex-direction:column; gap:6px; }
input, select { padding:8px 10px; border:1px solid #cfd8cf; border-radius:8px; font-size:14px; }
button { padding:8px 12px; border:none; border-radius:8px; cursor:pointer; font-weight:600; background:#2e7d32; color:#fff; }
button.secondary { background:#607d8b; }
button.danger { background:#c62828; }
.hint { font-size:12px; color:#445; opacity:.85; }
.sep { border:0; border-top:1px solid #e2e6e2; margin:10px 0; }

.tabs { display:flex; gap:6px; margin-bottom:8px; }
.tab { flex:1; padding:6px 8px; background:#e0e0e0; border:none; border-radius:8px 8px 0 0; cursor:pointer; font-weight:600; }
.tab.active { background:#2e7d32; color:#fff; }
.tab-content { border:1px solid #ccc; border-radius:0 8px 8px 8px; padding:10px; background:#fdfdfd; }
.tab-content.hidden { display:none; }

#stage { background:#fff; border:1px solid #e3e7e3; border-radius:12px; overflow:hidden; z-index:1; }
svg { width:100%; height:calc(100vh - 160px); display:block; }
.link { fill:none; stroke:var(--edge); stroke-width:2px; vector-effect:non-scaling-stroke; }
.node rect { rx:20; ry:20; stroke:#333; stroke-width:1.2px; }
.node rect.selected { stroke:#1976d2; stroke-width:3px; }
.node text { font-size:14px; font-weight:700; fill:#111; pointer-events:none; }
#adminToggleWrapper {
  text-align: center;
  margin-top: 12px;
}
#btnTogglePanel {
  font-size: 14px;
  padding: 6px 12px;
  margin-bottom: 8px;
}
